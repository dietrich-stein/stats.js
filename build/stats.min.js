// @drecom/stats.js - http://github.com/drecom/stats.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){"use strict";var e=function(e,t){var n=e,a=1e3/n,r=1e3/n*.6,o=2*Math.round(window.devicePixelRatio||1),f=80*o,l=48*o,i=3*o,c=2*o,u=3*o,s=25*o,m=74*o,d=20*o,p=s/2,S="#000022",h="#112244",v=0,y=0,M=d,x=0,w=[];t||(t=[]),x=t.length;for(var g=0;g<x;g++)w.push(d);var F=document.createElement("div");F.style.cssText=containerStyle;var P=document.createElement("canvas");P.width=f,P.height=l,F.appendChild(P),P.style.cssText=canvasStyle;var R=P.getContext("2d");R.font="bold "+9*o+"px Helvetica,Arial,sans-serif",R.textBaseline="top",R.fillStyle=S,R.fillRect(0,0,f,l),R.fillStyle=h,R.fillRect(u,s,m,d);var C=function(e,t,n,a){R.fillStyle=e;var r=Math.round((1-n/t)*d);d-o<r?r=d-o:r<0&&(r=0);var f=Math.min(r,a),l=Math.max(r,a)-f;return l<o&&(l=o),R.fillRect(u+m-o,s+f,o,l),r};return{dom:F,getFps:function(){return v},getMs:function(){return y},addCustomGraph:function(e){t.push(e),w.push(d),x++},update:function(e,l,g,F){if(v=e,y=l,R.fillStyle=S,R.fillRect(0,0,f,s),R.fillStyle=r<=y?"#ff0088":"#00ffff",R.fillText(Math.round(v)+" FPS  -  "+Math.round(y)+" MS",i,c),F&&(R.fillStyle="#ffaa00",R.fillText(F,i,p)),R.drawImage(P,u+o,s,m-o,d,u,s,m-o,d),R.fillStyle=h,R.fillRect(u+m-o,s,o,d),showFPS){R.fillStyle="#aa1155";var H=Math.round((1-v/n)*d);H<0&&(H=0),R.fillRect(u+m-o,s+H,o,d-H)}if(showMS&&(M=C("#00ffff",a,y,M)),x)for(var T=0;T<x;T++)w[T]=C(t[T].color,t[T].max,g[T],w[T])}}};return function(t){var n=t&&t.maxFPS?t.maxFPS:60,a=t&&t.maxMem?t.maxMem:100,r=t&&t.customGraphConf?t.customGraphConf:void 0,o=t&&t.drawInterval?t.drawInterval:1e3,f=(t&&t.containerStyle&&t.containerStyle,t&&t.canvasStyle&&t.canvasStyle,!t||!t.maxFPS||t.maxFPS,!(!t||!t.showMS)&&t.showMS,!(!t||!t.showMB)&&t.showMB,!1),l=0,i=(performance||Date).now()+5e3,c=!1;self.performance&&self.performance.memory&&self.performance.memory.usedJSHeapSize&&(f=!0,l=self.performance.memory.usedJSHeapSize);var u=new e(n,r),s=(performance||Date).now(),m=s,d=0,p=0,S=0,h="";return{dom:u.dom,getFps:function(){return u.getFps()},getMs:function(){return u.getMs()},getMem:function(){return p},setText:function(e){h=e},begin:function(){s=(performance||Date).now()},end:function(e){d++;var t=(performance||Date).now(),n=t-s;if(S<n&&(S=n),t>=m+o){var r=h;f&&(l!==performance.memory.usedJSHeapSize?(f=!1,u.addCustomGraph({color:"#fa0",max:a}),c=!0):i<t&&(f=!1)),c&&(e||(e=[]),p=window.performance.memory.usedJSHeapSize/1048576,e.push(p),r=Math.round(p)+" MB  "+h),u.update(1e3*d/(t-m),S,e,r),m=t,d=0,S=0}return t},update:function(e){s=this.end(e)}}}});