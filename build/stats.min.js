// @drecom/stats.js - http://github.com/drecom/stats.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Stats=t()}(this,function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function t(t){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{};o%2?e(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e,t,r){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=function(e){var t=e.maxFps,r=1e3/t,o=2*Math.round(window.devicePixelRatio||1),n=80*o,f=48*o,i=3*o,l=2*o,a=3*o,s=25*o,c=74*o,u=20*o,p=s/2,m=0,d=0,y=u,b=0,h=u,v=document.createElement("div");v.style.cssText=e.containerStyle;var w=document.createElement("canvas");w.width=n,w.height=f,v.appendChild(w),w.style.cssText=e.canvasStyle;var g=w.getContext("2d");g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=e.frameColor,g.fillRect(0,0,n,f),g.fillStyle=e.graphColor,g.fillRect(a,s,c,u);var S=function(e,t,r,n){g.fillStyle=e;var f=Math.round((1-r/t)*u);u-o<f?f=u-o:f<0&&(f=0);var i=Math.min(f,n),l=Math.max(f,n)-i;return l<o&&(l=o),g.fillRect(a+c-o,s+i,o,l),f};return{dom:v,getFps:function(){return m},getMs:function(){return d},getMb:function(){return b},update:function(e,f,v,x){g.fillStyle=x.frameColor,g.fillRect(0,0,n,s);var M="";if(x.showFps&&(m=e,M=Math.round(m)+" FPS",g.fillStyle=x.fpsTextColor,g.fillText(M,i,l)),x.showMs&&(d=f,M=Math.round(d)+" MS",g.fillStyle=x.msTextColor,g.fillText(M,c/2+3*o,l)),x.showMb&&(b=v,M=Math.round(b)+" MB",g.fillStyle=x.mbTextColor,g.fillText(M,i,p)),g.drawImage(w,a+o,s,c-o,u,a,s,c-o,u),g.fillStyle=x.graphColor,g.fillRect(a+c-o,s,o,u),x.showFps){g.fillStyle=x.fpsColor;var C=Math.round((1-m/t)*u);C<0&&(C=0),g.fillRect(a+c-o,s+C,o,o)}x.showMs&&(y=S(x.msColor,r,d,y)),x.showMb&&(h=S(x.mbColor,x.maxMb,b,h))}}};return function(e){e=t(t({},{maxFps:60,maxMb:100,drawInterval:1e3,containerStyle:"position:fixed;top:0;left:0;opacity:0.9;z-index:10000",canvasStyle:"width:160px;height:96px",showFps:!0,showMs:!1,showMb:!1,frameColor:"#000022",graphColor:"#112244",fpsColor:"#ffffff",fpsTextColor:"#ffffff",msColor:"#00ffff",msTextColor:"#00ffff",mbColor:"#ff00ff",mbTextColor:"#ff00ff"}),e);var r=!1,n=0,f=(performance||Date).now()+5e3,i=!1;self.performance&&self.performance.memory&&self.performance.memory.usedJSHeapSize&&(r=!0,n=self.performance.memory.usedJSHeapSize);var l=new o(e),a=(performance||Date).now(),s=a,c=0,u=0;return{dom:l.dom,getFps:function(){return l.getFps()},getMs:function(){return l.getMs()},getMb:function(){return 0},begin:function(){a=(performance||Date).now()},end:function(){c++;var t=(performance||Date).now(),o=t-a;if(u<o&&(u=o),t>=s+e.drawInterval){var p=0;e.showMb&&(r&&(n!==performance.memory.usedJSHeapSize?(r=!1,i=!0):f<t&&(r=!1)),i&&(p=window.performance.memory.usedJSHeapSize/1048576)),l.update(1e3*c/(t-s),u,p,e),s=t,c=0,u=0}return t},update:function(){a=this.end()}}}});