// @drecom/stats.js - http://github.com/drecom/stats.js
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Stats=t()}(this,function(){"use strict";var e=function(e,t,n,a){var r=e,o=1e3/r,f=1e3/r*.6,i=2*Math.round(window.devicePixelRatio||1),l=80*i,u=48*i,c=3*i,d=2*i,m=3*i,s=25*i,p=74*i,h=20*i,S=s/2,v="#000022",x="#112244",y=0,M=0,w=h,g=0,F=[];t||(t=[]),g=t.length;for(var P=0;P<g;P++)F.push(h);var R=document.createElement("div");R.style.cssText=n;var C=document.createElement("canvas");C.width=l,C.height=u,R.appendChild(C),C.style.cssText=a;var z=C.getContext("2d");z.font="bold "+9*i+"px Helvetica,Arial,sans-serif",z.textBaseline="top",z.fillStyle=v,z.fillRect(0,0,l,u),z.fillStyle=x,z.fillRect(m,s,p,h);var H=function(e,t,n,a){z.fillStyle=e;var r=Math.round((1-n/t)*h);h-i<r?r=h-i:r<0&&(r=0);var o=Math.min(r,a),f=Math.max(r,a)-o;return f<i&&(f=i),z.fillRect(m+p-i,s+o,i,f),r};return{dom:R,getFps:function(){return y},getMs:function(){return M},addCustomGraph:function(e){t.push(e),F.push(h),g++},update:function(e,n,a,u,P,R,T){y=e,z.fillStyle=v,z.fillRect(0,0,l,s),z.fillStyle="#00ffff";var B="";if(P&&(B=Math.round(y)+" FPS"),R&&(f<=(M=n)&&(z.fillStyle="#ff0088"),B=B.length>0?"  -  ":B,B+=Math.round(M)+" MS"),(P||R)&&z.fillText(Math.round(y)+" FPS  -  "+Math.round(M)+" MS",c,d),u&&(z.fillStyle="#ffaa00",z.fillText(u,c,S)),z.drawImage(C,m+i,s,p-i,h,m,s,p-i,h),z.fillStyle=x,z.fillRect(m+p-i,s,i,h),P){z.fillStyle="#aa1155";var D=Math.round((1-y/r)*h);D<0&&(D=0),z.fillRect(m+p-i,s+D,i,h-D)}if(R&&(w=H("#00ffff",o,M,w)),g)for(var G=0;G<g;G++)F[G]=H(t[G].color,t[G].max,a[G],F[G])}}};return function(t){var n=t&&t.maxFPS?t.maxFPS:60,a=t&&t.maxMem?t.maxMem:100,r=t&&t.customGraphConf?t.customGraphConf:void 0,o=t&&t.drawInterval?t.drawInterval:1e3,f=t&&t.containerStyle?t.containerStyle:"position:fixed;top:0;left:0;opacity:0.9;z-index:10000",i=t&&t.canvasStyle?t.canvasStyle:"width:80px;height:48px",l=(!t||!t.maxFPS||t.maxFPS,!(!t||!t.showMS)&&t.showMS,!(!t||!t.showMB)&&t.showMB,!1),u=0,c=(performance||Date).now()+5e3,d=!1;self.performance&&self.performance.memory&&self.performance.memory.usedJSHeapSize&&(l=!0,u=self.performance.memory.usedJSHeapSize);var m=new e(n,r,f,i),s=(performance||Date).now(),p=s,h=0,S=0,v=0,x="";return{dom:m.dom,getFps:function(){return m.getFps()},getMs:function(){return m.getMs()},getMem:function(){return S},setText:function(e){x=e},begin:function(){s=(performance||Date).now()},end:function(e){h++;var t=(performance||Date).now(),n=t-s;if(v<n&&(v=n),t>=p+o){var r=x;l&&(u!==performance.memory.usedJSHeapSize?(l=!1,m.addCustomGraph({color:"#fa0",max:a}),d=!0):c<t&&(l=!1)),d&&(e||(e=[]),S=window.performance.memory.usedJSHeapSize/1048576,e.push(S),r=Math.round(S)+" MB  "+x),m.update(1e3*h/(t-p),v,e,r),p=t,h=0,v=0}return t},update:function(e){s=this.end(e)}}}});